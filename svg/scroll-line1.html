<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style>
		body {
			margin: 0;
		}

		img {
			vertical-align: top;
		}

		header {
			overflow: hidden;
		}

		section {
			height: 4370px;
			width: 100%;
			background-color: #194853;
			background-image: url(https://le-mugs.com/wp-content/themes/mugs/./images/pattern-section6.jpg);
			background-repeat: repeat;
			background-position: top;
			position: relative;
			z-index: 1;
			overflow: hidden;
		}

		#tracesvg {
			position: absolute;
			top: 150px;
			left: calc(50% - 623px);
			border: 1px solid blue;

		}

		#tracesvg path {
			stroke-dashoffset: 1780px;
			stroke-dasharray: 1780px;
			border-top: 1px solid red;
			border-bottom: 1px solid red;
		}

		#saladesvg {
			position: absolute;
			top: 220px;
			left: 50%;
			border: 1px solid red;
		}

		#saladesvg path {
			stroke-dashoffset: 120px;
			stroke-dasharray: 120px;
		}

		footer {
			overflow: hidden;
		}

		.viewport {
			position: fixed;
			left: 0;
			top: 70%;
			width: 100%;border-top: 3px dashed red;z-index: 2;
		}
	</style>
</head>

<body>
	<header>
		<img src="https://le-mugs.com/wp-content/uploads/2015/07/DSC_0220-Modifier-1920x696.jpg">
	</header>
	<section>
		<svg version="1.1" id="saladesvg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
			x="0px" y="0px" width="231px" height="235px" viewBox="0 0 231 235" enable-background="new 0 0 231 235"
			xml:space="preserve">
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10"
				d="M50.561,97.479c-17.182,11.48,14.482,32.726,14.16,43.978c-0.158,5.562-5.945,10.347-10.023,4.55" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10"
				d="M75.385,143.604c-2.129-9.674-4.299-19.411-5.087-29.306c-0.308-3.869-1.995-15.606,1.671-18.635 c6.41-5.295,11.436,22.328,12.213,26.06c1.375,6.603,2.576,13.242,3.838,19.868" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="M70.967,120.066c4.13-0.823,8.218-1.654,12.355-2.404" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10"
				d="
M88.187,89.036c3.422,10.671,6.934,21.34,9.945,32.134c0.998,3.575,1.539,16.189,5.029,18.407c2.035,1.294,4.276-0.085,5.991-1.453" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M121.509,135.273c-2.937-8.119-5.718-16.291-7.534-24.745c-1.365-6.352-4.098-16.285-1.825-22.717
c1.888-5.341,4.455-2.835,7.006,1.04c4.471,6.79,7.013,15.359,9.082,23.139c1.919,7.217,2.979,14.491,3.335,21.941" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M114.576,113.636c4.396-0.981,8.675-2.411,12.972-3.745" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M147.674,134.155c-5.905-17.36-13.825-35.369-17.49-53.331c15.73,13.051,24.729,27.903,20.676,49.176
c-0.379,1.991-0.471,5.765-3.129,4.603" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M157.905,75.171c-8.814,8.97,1.768,22.756,6.933,30.843c3.507,5.492,11.816,18.168,4.741,24.618
c-2.095,1.91-3.874,1.806-5.747-0.727" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M34.682,89.092c-4.52-3.323-9.221-5.862-13.082-10.12" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M61.773,73.093c-2.908-4.798-6.283-8.94-8.225-14.35" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M94.222,61.493c-1.27-5.465-3.187-10.452-3.347-16.197" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M97.213,181.754c-0.268-5.605-1.258-10.855-0.384-16.535" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M133.671,61.084c0.834-4.478,2.076-8.315,3.742-12.416" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M166.181,66.617c2.513-2.782,4.517-5.787,6.485-8.833" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M185.86,118.892c5.385,0.016,11.142-0.573,16.493,0.168" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M122.454,160.976c1.784,5.081,4.262,10.311,5.351,15.603" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M179.266,92.137c5.172-1.5,10.531-3.684,15.875-4.478" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M159.807,146.119c3.401,3.628,7.7,9.387,11.853,12.076" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M68.562,164.737c0.321,6.009-1.442,11.911-1.396,17.892" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M44.523,152.492c-5.05,2.938-10.343,6.47-15.878,8.498" />
			<path fill="none" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
				stroke-miterlimit="10" d="
M36.248,124.594c-5.322,1.141-11.269,2.086-16.773,2.069" />
		</svg>
		<svg version="1.1" id="tracesvg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
			x="0px" y="0px" width="1031px" height="3900px" viewBox="0 0 1031 3544" enable-background="new 0 0 1031 3544"
			xml:space="preserve">
			<path id="p1" fill="none" stroke="#FFFFFF" stroke-width="10" stroke-linecap="round" stroke-miterlimit="0"
				d="M845,14.04
			c94.488-0.933,147.798,113.116,61,198.96c-112.197,110.964-250.383,70.569-402,133c-110.712,45.587-171.223,130.125-158.981,201.27" />
			<path id="p2" fill="none" stroke="#FFFFFF" stroke-width="10" stroke-linecap="round" stroke-miterlimit="10"
				d="M395.214,636.783
			C508.019,750.449,735.719,626.242,785,780c18.75,58.5,0.346,121.5-10.028,149.343" />
			<path id="p3" fill="none" stroke="#FFFFFF" stroke-width="10" stroke-linecap="round" stroke-miterlimit="10"
				d="M719,1080.551
			C685.436,1165,677,1284,735,1326c47.015,34.045,115.498,12.164,131-45c16-59-23-111-88-112c-84.843-1.306-125.168,89.977-138.98,151
			c-15.885,70.191,14.48,139.643,57.16,193.202" />
			<path id="p4" fill="none" stroke="#FFFFFF" stroke-width="10" stroke-linecap="round" stroke-miterlimit="10"
				d="M784.698,1636.219
			c35.149,46.862,48.542,101.471-3.998,141.429c-52.421,39.867-115.838,17.305-165.888-13.571
			c-53.508-33.005-222.409-144.596-354.4-151.492c-65.354-3.416-132.975,15.642-173.593,70.394
			c-35.042,47.233-43.539,112.665-22.847,167.587c22.548,59.844,76.491,95.053,137.791,106.104
			c81.652,14.722,130.323-30.101,213.6-42.669c112.637-17,195.638,54.803,221.399,130.602" />
			<path id="p5" fill="none" stroke="#FFFFFF" stroke-width="10" stroke-linecap="round" stroke-miterlimit="10"
				d="M679.961,2196
			c15.618,110-32.448,221.008-163.556,202.901C437.362,2387.983,326,2354,248,2411c-69.651,50.899-70.48,127.04-64.81,178.391" />
			<path id="p6" fill="none" stroke="#FFFFFF" stroke-width="10" stroke-linecap="round" stroke-miterlimit="10"
				d="M223.544,2718.265
			c19.247,66.11,179.788,263.739,297.122,209.739c49.069-22.583,50-86-0.667-117.333c-43.041-26.617-106-8-114,43.333
			c-13.321,85.474,76,101.996,136,210.663" />
			<path id="p7" fill="none" stroke="#FFFFFF" stroke-width="10" stroke-linecap="round" stroke-miterlimit="10"
				d="M597,3185
			c0,0,60.092,149.502,40.768,359" />
		</svg>
	</section>
	<footer>
		<img src="https://le-mugs.com/wp-content/uploads/2015/08/Slide-9.jpg" alt="">
	</footer>
	<script>
		const obj1 = document.getElementById('saladesvg');
		// window.pageYOffset + txt3.getBoundingClientRect().top
		let obj1Top = window.pageYOffset + obj1.getBoundingClientRect().top;
		const viewPort = parseInt(window.innerHeight * 0.7);
		console.log('win height:' + window.innerHeight, 'viewPort : ' + viewPort);
		let winScroll = 0;
		const obj1PathOffset = 119;
		let obj1PathOffsetLimit = 0;
		function obj1PathSet(val) {
			let obgPath = obj1.childNodes;
			for (let i = 0; i < obgPath.length; i++) {
				// console.log(obgPath[i]);
				obgPath[i].style = 'stroke-dashoffset:' + val + 'px';
			}
		}
		const pPath = [];
		const pPathTop = [];
		const pPathSet = [980, 600, 1020, 1780, 790, 950, 370];


		for (let i = 0; i < 7; i++) {
			pPath[i] = document.getElementById('p' + (i + 1));
			pPathTop[i] = window.pageYOffset + parseInt(pPath[i].getBoundingClientRect().top);
			pPath[i].style = 'stroke-dasharray:' + pPathSet[i] + 'px';
			console.log(pPathTop[i]);
		}

		// const p1 = document.getElementById('p1');


		window.addEventListener('scroll', function (e) {
			winScroll = window.pageYOffset;
			obj1Top = window.pageYOffset + obj1.getBoundingClientRect().top
			obj1PathOffsetLimit = winScroll - (obj1Top - viewPort);

			if (winScroll > obj1Top - viewPort) {
				if (obj1PathOffsetLimit < 120 && obj1PathOffsetLimit > 0) {
					obj1PathSet(120 - obj1PathOffsetLimit);
				}
			}

			for (let i = 0; i < 7; i++) {
				if (winScroll > pPathTop[i] - viewPort) {
					let startDash = pPathSet[i] + (pPathTop[i] - viewPort - winScroll) * 1.5;

					// if (winScroll < pPathSet[i] && startDash < 0){
						pPath[i].style.strokeDashoffset = startDash + 'px';
					// }

					console.log(winScroll, startDash);
				}
			}
		});
	</script>

	<div class="viewport"></div>
</body>

</html>